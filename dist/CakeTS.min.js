var CakeTS;!function(a){!function(a){var b=function(){function a(a){this.Name="Error",this.Message="",this.Message=a,this.Target=arguments.callee.caller}return a}();a.Error=b}(a.Core||(a.Core={}));a.Core}(CakeTS||(CakeTS={}));var __extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c},CakeTS;!function(a){!function(a){!function(b){var c=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b}(a.Error);b.AuthenticationError=c}(a.Errors||(a.Errors={}));a.Errors}(a.Core||(a.Core={}));a.Core}(CakeTS||(CakeTS={}));var CakeTS;!function(a){!function(a){!function(b){var c=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b}(a.Error);b.InvalidPathError=c}(a.Errors||(a.Errors={}));a.Errors}(a.Core||(a.Core={}));a.Core}(CakeTS||(CakeTS={}));var CakeTS;!function(a){!function(a){!function(b){var c=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b}(a.Error);b.UnauthenticatedAccessError=c}(a.Errors||(a.Errors={}));a.Errors}(a.Core||(a.Core={}));a.Core}(CakeTS||(CakeTS={}));var CakeTS;!function(a){!function(a){!function(b){var c=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b}(a.Error);b.UninitializedAccessError=c}(a.Errors||(a.Errors={}));a.Errors}(a.Core||(a.Core={}));a.Core}(CakeTS||(CakeTS={}));var CakeTS;!function(a){!function(a){!function(a){var b=function(){function a(a){this.eventHandlers=[],this.sender=a}return a.prototype.Fire=function(a){for(var b=0;b<this.eventHandlers.length;b++)this.eventHandlers[b](this.sender,a)},a.prototype.Attach=function(a,b){for(var c=0;c<this.eventHandlers.length;c++)if(this.eventHandlers[c]===a)return;if(b){var d=a;a=function(a,c){d.call(b,a,c)}}this.eventHandlers.push(a)},a.prototype.Remove=function(a){for(var b=0;b<this.eventHandlers.length;b++)if(this.eventHandlers[b]===a){this.eventHandlers.splice(b,1);break}},a.prototype.NumHandlers=function(){return this.eventHandlers.length},a}();a.TSEvent=b}(a.Events||(a.Events={}));a.Events}(a.Core||(a.Core={}));a.Core}(CakeTS||(CakeTS={}));var CakeTS;!function(a){!function(a){!function(a){var b=function(a){function b(b,c,d){var e=this;a.call(this,b),b.GetElement().on(c,d||"",function(a){e.Fire({event:a,element:jQuery(e)})})}return __extends(b,a),b}(a.TSEvent);a.DOMEvent=b}(a.Events||(a.Events={}));a.Events}(a.Core||(a.Core={}));a.Core}(CakeTS||(CakeTS={}));var CakeTS;!function(a){!function(a){var b=function(){function a(){}return a.IsUpperCase=function(a){return null!=a.match(/^[A-Z]+$/)},a.MakeInitialLowerCase=function(a){return a.substring(0,1).toLowerCase()+a.substring(1)},a.ToPascalCase=function(b,c){if(null==b||""===b)return b;b=b.replace("_","");var d=b.split(" ");if(d.length>1||a.IsUpperCase(d[0])){for(var e=0;e<d.length;e++)if(d[e].length>0){var f=d[e],g=f.substring(1);a.IsUpperCase(g)&&(g=g.toLowerCase()),d[e]=f.substring(0,1).toUpperCase()+g}return d.join(c?"":"_")}return d[0].substring(0,1).toUpperCase()+d[0].substring(1)},a.ToCamelCase=function(b){return a.MakeInitialLowerCase(a.ToPascalCase(b,!0))},a.AddUnderscores=function(a){return a.replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/[-\s]/g,"_")},a.AddDashes=function(a){return a.replace(/([A-Z]+)([A-Z][a-z])/g,"$1-$2").replace(/([a-z\d])([A-Z])/g,"$1-$2").replace(/[\s]/g,"-")},a.AddUnderscorePrefix=function(a){return"_"+a},a.GetNameVariants=function(b){return[b,a.ToCamelCase(b),b.toLowerCase(),a.AddUnderscores(b),a.AddUnderscores(b).toLowerCase(),a.AddDashes(b),a.AddDashes(b).toLowerCase(),a.AddUnderscorePrefix(b),a.AddUnderscorePrefix(a.ToCamelCase(b))]},a}();a.StringExtensions=b}(a.Utils||(a.Utils={}));a.Utils}(CakeTS||(CakeTS={}));var CakeTS;!function(a){!function(b){var c=a.Utils.StringExtensions,d=function(){function a(){}return a.prototype.ToObject=function(){return ko.toJS(this)},a.prototype.Serialize=function(){return ko.toJSON(this)},a.prototype.Update=function(a){if(null!=a){var b,d=this;for(b in d){if(!ko.isObservable(d[b]))return;for(var e=ko.utils.unwrapObservable(d[b]),f=c.GetNameVariants(b),g=0;g<f.length;g++)if(a.hasOwnProperty(f[g])){if(["string","number","boolean"].indexOf(typeof e)>=0){d[b](a[f[g]]);break}if(e instanceof Array){for(var h=e[0],i=[],j=0;j<a[f[g]].length;j++){var k=new h.constructor;k.Update(a[f[g]][j]),i.push(k)}d[b](i);break}if("object"==typeof e&&null!=e&&e.constructor){var l=new e.constructor;l.Update(a[f[g]]),d[b](l);break}}}}},a}();b.Model=d}(a.Data||(a.Data={}));a.Data}(CakeTS||(CakeTS={}));var CakeTS;!function(a){!function(a){!function(a){var b=(Typertext.Http.HttpProtocol,function(){function a(a,b,c,d){"undefined"==typeof b&&(b=1),"undefined"==typeof c&&(c=""),"undefined"==typeof d&&(d=0),this.domain=a,this.protocol=b,this.path=c,this.port=d}return a.prototype.GetDomain=function(){return this.domain},a.prototype.GetProtocol=function(){return this.protocol},a.prototype.GetPath=function(){return this.path},a.prototype.GetPort=function(){return this.port},a}());a.ProxyEndpoint=b}(a.Proxies||(a.Proxies={}));a.Proxies}(a.Data||(a.Data={}));a.Data}(CakeTS||(CakeTS={}));var CakeTS;!function(a){!function(a){!function(a){!function(a){a[a.Success=0]="Success",a[a.ServerError=1]="ServerError",a[a.ClientError=2]="ClientError",a[a.UnknownError=3]="UnknownError"}(a.ProxyStatus||(a.ProxyStatus={}));a.ProxyStatus}(a.Proxies||(a.Proxies={}));a.Proxies}(a.Data||(a.Data={}));a.Data}(CakeTS||(CakeTS={}));var CakeTS;!function(a){!function(a){!function(a){var b=function(){function a(a,b){"undefined"==typeof b&&(b={}),this.status=a,this.data=b}return a.prototype.GetStatus=function(){return this.status},a.prototype.GetData=function(){return this.data},a}();a.ProxyResponse=b}(a.Proxies||(a.Proxies={}));a.Proxies}(a.Data||(a.Data={}));a.Data}(CakeTS||(CakeTS={}));var CakeTS;!function(a){!function(b){!function(b){!function(b){var c=a.Data.Proxies.ProxyResponse,d=(a.Data.Proxies.ProxyStatus,Typertext.Json.JsonRequest),e=Typertext.Http.HttpUrl,f=a.Core.Events.TSEvent,g=a.Core.Errors.UnauthenticatedAccessError,h=function(){function a(a,b,c){this._AccessToken="",this._AccessTokenExpiration=0,this._Endpoint=a,this._AccessToken=b,this._AccessTokenExpiration=c,this.AuthenticationUpdate=new f(this)}return a.prototype.RawResponse=function(a){var b=a.GetHttpStatus();401===b&&this.Authenticated()&&(this._AccessToken=null,this._AccessTokenExpiration=0,this.AuthenticationUpdate.Fire(this));var d;return d=0===a.GetStatus()?0:b>=500&&600>b?1:b>=400&&500>b?2:3,new c(d,a.GetContent())},a.prototype.RawRequest=function(a,b){var f=this,h=function(a){b(f.RawResponse(a))};if("object"!=typeof a&&(a={}),"queryString"in a){if("object"!=typeof a.queryString)throw{}}else a.queryString={};if("undefined"==typeof a.queryString.access_token||a.queryString.access_token!==!1){if(!this.Authenticated())throw new g(a);a.queryString.access_token=this.GetAccessToken()}else delete a.queryString.access_token;if("postData"in a){if("object"!=typeof a.postData)throw{}}else a.postData={};if("GET"===a.method){var i,j=a.postData;delete a.postData;for(i in a.queryString)j[i]=a.queryString[i];a.queryString=j}"path"in a&&"string"==typeof a.path?0!==a.path.indexOf("/")&&(a.path="/"+a.path):a.path="/",a.path.lastIndexOf("/")!==a.path.length-1&&(a.path=a.path+"/");try{var k=new d,l=e.FromUrl(this._Endpoint.ToString()+a.path+Typertext.Http.HttpUrl.EncodeQueryString(a.queryString));switch(a.method){case"DELETE":k.Delete(l,h);break;case"POST":k.Post(l,a.postData,h);break;case"PUT":k.Put(l,a.postData,h);break;case"GET":default:k.Get(l,h)}}catch(m){b(new c(1))}},a.prototype.Authenticate=function(a,b){this._AccessToken=a,this._AccessTokenExpiration=b,this.AuthenticationUpdate.Fire(this)},a.prototype.Authenticated=function(){return""!==this._AccessToken&&this._AccessTokenExpiration>(new Date).getTime()/1e3},a.prototype.Deauthenticate=function(){this._AccessToken="",this._AccessTokenExpiration=0,this.AuthenticationUpdate.Fire(this)},a.prototype.GetAccessToken=function(){if(!this.Authenticated())throw{};return this._AccessToken},a.prototype.GetAccessTokenExpiration=function(){if(!this.Authenticated())throw{};return this._AccessTokenExpiration},a.prototype.GetEndpoint=function(){return this._Endpoint},a}();b.PushUpAPI=h}(b.Pushup||(b.Pushup={}));b.Pushup}(b.Proxies||(b.Proxies={}));b.Proxies}(a.Data||(a.Data={}));a.Data}(CakeTS||(CakeTS={}));var CakeTS;!function(a){!function(a){var b=function(){function a(a,b){this.pageName=a,this.pageParams=b}return a.FromString=function(b){for(var c,d=b.split("/"),e={},f=d.shift();void 0!==(c=d.shift());){var g=c.split(":");g.length>1&&(e[g.shift()]=g.join(":"))}return new a(f,e)},a.CompareHistoryItems=function(a,b){if(a.GetPageName()!==b.GetPageName())return!1;var c,d=a.GetPageParams(),e=b.GetPageParams();for(c in d)if(d.hasOwnProperty(c)&&(!e.hasOwnProperty(c)||e[c]!==d[c]))return!1;for(c in b)if(b.hasOwnProperty(c)&&!a.hasOwnProperty(c))return!1;return!0},a.prototype.GetPageName=function(){return this.pageName},a.prototype.GetPageParams=function(){return this.pageParams},a.prototype.ToString=function(){var a,b=this.pageName;for(a in this.pageParams)b+="/"+a+":"+this.pageParams[a];return b},a.prototype.CompareTo=function(b){return a.CompareHistoryItems(this,b)},a}();a.HistoryItem=b}(a.Routing||(a.Routing={}));a.Routing}(CakeTS||(CakeTS={}));var CakeTS;!function(a){!function(a){!function(a){var b=function(){function a(){}return a}();a.MessageException=b;var c=function(){function a(a,c){if(this.type=a,this.data=c,void 0===this.data)throw new b}return a.prototype.GetData=function(){return this.data},a.prototype.GetType=function(){return this.type},a}();a.Message=c}(a.IFrame||(a.IFrame={}));a.IFrame}(a.Routing||(a.Routing={}));a.Routing}(CakeTS||(CakeTS={}));var CakeTS;!function(a){!function(a){!function(){}(a.IFrame||(a.IFrame={}));a.IFrame}(a.Routing||(a.Routing={}));a.Routing}(CakeTS||(CakeTS={}));var CakeTS;!function(a){!function(a){!function(a){a[a.Trace=0]="Trace",a[a.Debug=1]="Debug",a[a.Info=2]="Info",a[a.Warn=3]="Warn",a[a.Error=4]="Error",a[a.Slient=5]="Slient"}(a.LogLevel||(a.LogLevel={}));a.LogLevel}(a.Utils||(a.Utils={}));a.Utils}(CakeTS||(CakeTS={}));var CakeTS;!function(a){!function(a){!function(a){a[a.Loader=0]="Loader",a[a.Component=1]="Component",a[a.Router=2]="Router",a[a.Messenger=3]="Messenger",a[a.ViewModel=4]="ViewModel",a[a.Model=5]="Model",a[a.Widget=6]="Widget"}(a.LogCategory||(a.LogCategory={}));a.LogCategory}(a.Utils||(a.Utils={}));a.Utils}(CakeTS||(CakeTS={}));var CakeTS;!function(a){!function(a){var b=function(){function a(){if(null==a.instance){this.logLevel=5;var b=window.console||{log:function(){return null}};this.log=function(a){return b.log(a)},this.trace="undefined"==typeof b.trace?function(){}:function(){return b.trace.call(b)},this.dumpObject="undefined"==typeof b.dir?function(a){return b.log(a)}:function(a){return b.dir(a)},this.info="undefined"==typeof b.info?function(a){return b.log(a)}:function(a){return b.info.call(b,a)},this.warn="undefined"==typeof b.warn?function(a){return b.log(a)}:function(a){return b.warn(a)},this.error="undefined"==typeof b.error?function(a){return b.log(a)}:function(a){return b.error(a)},a.instance=this}}return a.GetInstance=function(){return null==a.instance&&(a.instance=new a),a.instance},a.SetLogLevel=function(b){a.GetInstance().logLevel=b},a.EnableAll=function(){a.GetInstance().logLevel=0},a.DisableAll=function(){a.GetInstance().logLevel=5},a.Trace=function(){var b=a.GetInstance();b.logLevel>0||b.trace()},a.Debug=function(b){var c=a.GetInstance();c.logLevel>1||c.dumpObject(b)},a.Info=function(b){var c=a.GetInstance();c.logLevel>2||c.info(b)},a.Warn=function(b){var c=a.GetInstance();c.logLevel>3||c.warn(b)},a.Error=function(b){var c=a.GetInstance();c.logLevel>4||c.error(b)},a.instance=null,a}();a.Logger=b}(a.Utils||(a.Utils={}));a.Utils}(CakeTS||(CakeTS={}));var CakeTS;!function(a){!function(b){!function(b){var c=a.Core.Events.TSEvent,d=a.Utils.Logger,e=(a.Utils.LogCategory,function(){function a(a){var c=this;this.handlers={},this.ready=!1,this.targetOrigin=a;var e=function(a){d.Info("Got raw message in PushupMessenger:",3),d.Debug(a,3),c.HandleMessage(a)};window.addEventListener?window.addEventListener("message",e,!1):window.attachEvent&&window.attachEvent("onmessage",e),this.uniqueId="Messenger"+Math.floor(1e8*Math.random());var f=function(a,b){if(d.Info("Testing parent cap",0),b.GetData().uniqueId===c.uniqueId){for(var e=b.GetData().capabilities,f=e.length-1;f>=0;f--)c.parentCapabilities[e[f]]="";c.ready=!0}};this.Register("ParentCapabilities",f,this),this.parentCapabilities={MessengerAdded:""},this.SendMessage(new b.Message("MessengerAdded",{uniqueId:this.uniqueId}))}return a.prototype.IsReady=function(){return this.ready},a.prototype.SendMessage=function(a){a.GetType()in this.parentCapabilities&&parent.postMessage(JSON.stringify({ident:"PushupEvent",type:a.GetType(),data:a.GetData()}),this.targetOrigin)},a.prototype.Register=function(a,b,d){"undefined"==typeof d&&(d=null),this.handlers.hasOwnProperty(a)||(this.handlers[a]=new c(this)),null==d&&(d={}),this.handlers[a].Attach(b)},a.prototype.HandleMessage=function(a){try{var c=JSON.parse(a.data);if(a.origin!==this.targetOrigin||"object"!=typeof c||"PushupEvent"!==c.ident||"undefined"==typeof c.data||"string"!=typeof c.type)return;if(this.handlers.hasOwnProperty(c.type)){var d=new b.Message(c.type,c.data);this.handlers[c.type].Fire(d)}}catch(e){}},a}());b.IFrameMessenger=e}(b.IFrame||(b.IFrame={}));b.IFrame}(a.Routing||(a.Routing={}));a.Routing}(CakeTS||(CakeTS={}));var CakeTS;!function(a){!function(b){!function(b){var c=a.Core.Events.TSEvent,d=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b}(c);b.MessageEvent=d}(b.IFrame||(b.IFrame={}));b.IFrame}(a.Routing||(a.Routing={}));a.Routing}(CakeTS||(CakeTS={}));var CakeTS;!function(a){!function(a){var b=function(){function a(a){this._router=a}return a.prototype.GetRouter=function(){return this._router},a.prototype.GetElement=function(){return this._element},a.prototype.SetElement=function(a){this._element=jQuery(a)},a.prototype.HasPage=function(a,b){var c;for(c in a)if(a.hasOwnProperty(c)&&a[c]===b)return!0;return!1},a.prototype.AuthenticationCheck=function(){return!1},a.prototype.InterceptChange=function(a){return a},a}();a.Manager=b}(a.UI||(a.UI={}));a.UI}(CakeTS||(CakeTS={}));var CakeTS;!function(a){!function(b){var c=a.Core.Events.TSEvent,d=function(){function a(a,b){var d=this;"undefined"==typeof b&&(b=0),this.element=a,this.padding=b,this.ScrollLimitReached=new c(this),this.element.onscroll=function(a){d.OnElementScroll(a)},this.Enable()}return a.prototype.OnElementScroll=function(){var a,b,c;a=this.element.scrollHeight,b=this.element.scrollTop,c=this.element.clientHeight,a-(b+c)<this.padding&&this.isEnabled===!0&&this.ScrollLimitReached.Fire()},a.prototype.Enable=function(){this.isEnabled=!0,this.OnElementScroll(null)},a.prototype.Disable=function(){this.isEnabled=!1},a.prototype.Destroy=function(){this.element.onscroll=null},a}();b.ScrollWatcher=d}(a.UI||(a.UI={}));a.UI}(CakeTS||(CakeTS={}));var CakeTS;!function(a){!function(b){var c=a.Core.Events.TSEvent,d=a.Routing.HistoryItem,e=function(){function a(a){if(this.Navigate=new c(this),"undefined"!=typeof a){switch(typeof a){case"string":a=jQuery(a);break;case"undefined":a=jQuery("<div>")}this._rootElement=a,ko.applyBindings(this,this._rootElement[0])}}return a.prototype.GetElement=function(){return this._rootElement},a.prototype.SetElement=function(a){this._rootElement=a},a.prototype.NavigatePage=function(a,b){this.Navigate.Fire(new d(a,b))},a.prototype.Destroy=function(){ko.cleanNode(this._rootElement[0])},a}();b.ViewModel=e}(a.UI||(a.UI={}));a.UI}(CakeTS||(CakeTS={}));var CakeTS;!function(a){!function(a){var b=function(){function a(a){this._viewModel=a}return a.prototype.GetViewModel=function(){return this._viewModel},a}();a.Widget=b}(a.UI||(a.UI={}));a.UI}(CakeTS||(CakeTS={}));var CakeTS;!function(a){!function(a){var b=function(){function a(){}return a.CheckLocalStorage=function(a){try{var b="test";return a.setItem(b,b),a.getItem(b),a.removeItem(b),!0}catch(c){return!1}},a.Get=function(b){if(a.localStorageEnabled)try{return JSON.parse(window.localStorage.getItem(b))}catch(c){}return a.fallback[b]},a.Set=function(b,c){if(a.localStorageEnabled)try{window.localStorage.setItem(b,JSON.stringify(c))}catch(d){}a.fallback[b]=c},a.Iterate=function(b){var c;if(a.localStorageEnabled)for(var d=0;d<window.localStorage.length;d++){var e=window.localStorage.key(d);c=b(window.localStorage.getItem(e)),c?window.localStorage.setItem(e,c):(window.localStorage.removeItem(e),d--)}else c=b(a.fallback),a.fallback=c?c:{}},a.NativeEnabled=function(){return a.localStorageEnabled},a.localStorageEnabled=a.CheckLocalStorage(window.localStorage),a.fallback={},a}();a.Storage=b}(a.Utils||(a.Utils={}));a.Utils}(CakeTS||(CakeTS={}));var CakeTS;!function(a){!function(a){var b=function(){function a(){}return a.ParseUrl=function(a){var b=document.createElement("a");return b.href=a,{protocol:b.protocol,domain:b.hostname,port:parseInt(b.port,10)}},a}();a.UrlHandling=b}(a.Utils||(a.Utils={}));a.Utils}(CakeTS||(CakeTS={}));
//# sourceMappingURL=CakeTS.min.js.map